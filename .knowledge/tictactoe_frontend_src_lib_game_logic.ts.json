{"is_source_file": true, "format": "TypeScript", "description": "This file contains the core logic of the Tic Tac Toe game, including state management, game rules, move application, and game status updates, with audit logging integrations.", "external_files": ["../utils/audit", "../utils/validation"], "external_methods": ["logAction", "guardMove"], "published": ["createInitialState", "resetBoard", "newGame", "checkWinner", "isDraw", "applyMove", "setMode", "Cell", "Board", "GameStatus", "GameMode", "Scores", "GameState"], "classes": [], "methods": [{"name": "export function createInitialState(mode: GameMode = \"pvp\"): GameState { createInitialState", "description": "Creates a new initial game state with an empty board, starting player, scores, and mode, and logs the game initialization.", "scope": "", "scopeKind": ""}, {"name": "export function resetBoard(state: GameState): GameState { resetBoard", "description": "Resets the game board to an empty state while maintaining scores and game mode, and logs the reset event.", "scope": "", "scopeKind": ""}, {"name": "export function newGame(state: GameState): GameState { newGame", "description": "Resets the board and scores to start a new game, and logs the event.", "scope": "", "scopeKind": ""}, {"name": "export function checkWinner(board: Board): \"X\" | \"O\" | null { checkWinner", "description": "Checks the current board for a winning condition, returning the winning player or null.", "scope": "", "scopeKind": ""}, {"name": "export function isDraw(board: Board): boolean { isDraw", "description": "Determines whether the game is a draw by checking if all cells are filled with no winner.", "scope": "", "scopeKind": ""}, {"name": "export function applyMove( applyMove", "description": "Applies a move to the game state after validation, updates game status, scores, and logs the move.", "scope": "", "scopeKind": ""}, {"name": "export function setMode(state: GameState, mode: GameMode): GameState { setMode", "description": "Changes the game mode and resets the board while retaining scores, with audit logging.", "scope": "", "scopeKind": ""}], "calls": ["logAction", "guardMove", "checkWinner", "isDraw"], "search-terms": ["game logic", "tic tac toe", "state management", "move application", "winner detection"], "state": 2, "file_id": 23, "knowledge_revision": 74, "git_revision": "", "revision_history": [{"47": ""}, {"71": ""}, {"72": ""}, {"73": ""}, {"74": ""}], "ctags": [{"_type": "tag", "name": "Board", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export type Board = Cell[];$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Cell", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export type Cell = \"X\" | \"O\" | null;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "GameMode", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export type GameMode = \"pvp\" | \"cpu\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "GameState", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export interface GameState {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "GameStatus", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export type GameStatus = \"playing\" | \"won\" | \"draw\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "O", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  O: number;$/", "language": "TypeScript", "kind": "property", "scope": "Scores", "scopeKind": "interface"}, {"_type": "tag", "name": "Scores", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export interface Scores {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "X", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  X: number;$/", "language": "TypeScript", "kind": "property", "scope": "Scores", "scopeKind": "interface"}, {"_type": "tag", "name": "a", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    const v = board[a];$/", "language": "TypeScript", "kind": "constant", "scope": "checkWinner", "scopeKind": "function"}, {"_type": "tag", "name": "a", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  for (const [a, b, c] of lines) {$/", "language": "TypeScript", "kind": "constant", "scope": "checkWinner", "scopeKind": "function"}, {"_type": "tag", "name": "applyMove", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export function applyMove($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "b", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  for (const [a, b, c] of lines) {$/", "language": "TypeScript", "kind": "constant", "scope": "checkWinner", "scopeKind": "function"}, {"_type": "tag", "name": "before", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const before = [...state.board];$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    board,$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    board: Array<Cell>(9).fill(null),$/", "language": "TypeScript", "kind": "constant", "scope": "resetBoard", "scopeKind": "function"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  board: Board;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "board", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const board = before.slice();$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "c", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  for (const [a, b, c] of lines) {$/", "language": "TypeScript", "kind": "constant", "scope": "checkWinner", "scopeKind": "function"}, {"_type": "tag", "name": "checkWinner", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export function checkWinner(board: Board): \"X\" | \"O\" | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createInitialState", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export function createInitialState(mode: GameMode = \"pvp\"): GameState {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "currentPlayer", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    currentPlayer: status === \"playing\" ? nextPlayer : state.currentPlayer,$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "currentPlayer", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  currentPlayer: \"X\" | \"O\";$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "isDraw", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export function isDraw(board: Board): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "lines", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const lines = [$/", "language": "TypeScript", "kind": "constant", "scope": "checkWinner", "scopeKind": "function"}, {"_type": "tag", "name": "mode", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  mode: GameMode;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "newGame", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export function newGame(state: GameState): GameState {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "newState", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const newState = resetBoard({ ...state, scores: { X: 0, O: 0 } });$/", "language": "TypeScript", "kind": "constant", "scope": "newGame", "scopeKind": "function"}, {"_type": "tag", "name": "newState", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const newState: GameState = {$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "newState", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const newState: GameState = {$/", "language": "TypeScript", "kind": "constant", "scope": "resetBoard", "scopeKind": "function"}, {"_type": "tag", "name": "nextPlayer", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const nextPlayer = state.currentPlayer === \"X\" ? \"O\" : \"X\";$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "resetBoard", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export function resetBoard(state: GameState): GameState {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "scores", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    scores,$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "scores", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  scores: Scores;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "setMode", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^export function setMode(state: GameState, mode: GameMode): GameState {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const state: GameState = {$/", "language": "TypeScript", "kind": "constant", "scope": "createInitialState", "scopeKind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    status,$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  status: GameStatus;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const updated = resetBoard({ ...state, mode });$/", "language": "TypeScript", "kind": "constant", "scope": "setMode", "scopeKind": "function"}, {"_type": "tag", "name": "v", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    const v = board[a];$/", "language": "TypeScript", "kind": "constant", "scope": "checkWinner", "scopeKind": "function"}, {"_type": "tag", "name": "winner", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^    winner: declaredWinner,$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "winner", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  const winner = checkWinner(board);$/", "language": "TypeScript", "kind": "constant", "scope": "applyMove", "scopeKind": "function"}, {"_type": "tag", "name": "winner", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-online-210359-210386/tictactoe_frontend/src/lib/game/logic.ts", "pattern": "/^  winner: \"X\" | \"O\" | null;$/", "language": "TypeScript", "kind": "property", "scope": "GameState", "scopeKind": "interface"}], "hash": "a7ffcb1c0863013e5ff7ee7d5bd344d1", "format-version": 4, "code-base-name": "tictactoe_frontend", "filename": "tictactoe_frontend/src/lib/game/logic.ts", "fields": [{"name": "export interface GameState {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "O: number;", "scope": "Scores", "scopeKind": "interface", "description": "unavailable"}, {"name": "export interface Scores {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "X: number;", "scope": "Scores", "scopeKind": "interface", "description": "unavailable"}, {"name": "board: Board;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "currentPlayer: \"X\" | \"O\";", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "mode: GameMode;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "scores: Scores;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "status: GameStatus;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}, {"name": "winner: \"X\" | \"O\" | null;", "scope": "GameState", "scopeKind": "interface", "description": "unavailable"}]}